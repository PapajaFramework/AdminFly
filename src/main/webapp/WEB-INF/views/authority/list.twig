{% extends '../layout/main.twig' %}
{% block content %}
    <div class="page-header mb-4">
        <h1 id="tables">Authority</h1>
    </div>
    <div class="row">
        <div class="col-lg-6">
            <div class="card border-light mb-3">
                <div class="card-header">Roles</div>
                <div class="card-body">
                    <table class="table table-hover">
                        <thead>
                        <tr>
                            <th scope="col" class="min-vh-100">ID</th>
                            <th scope="col">Name</th>
                            <th scope="col"></th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for role in roles %}
                            {% set edit = '/authority/role/edit/' ~ role.id %}
                            {% set remove = '/authority/role/remove/' ~ role.id %}
                            <tr>
                                <td>{{ role.id }}</td>
                                <td>{{ role.name }}</td>
                                <td>
                                    <button type="button" onclick="location.href='{{ edit }}'"
                                            class="btn btn-sm btn-primary">Edit</button>
                                    <button type="button" onclick="confirm('Are you sure?') ? location.href='{{ remove }}' : false"
                                            class="btn btn-sm btn-danger">Remove</button>
                                </td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
                <div class="card-footer">
                    <form method="post" action="/authority/process/role" class="form-inline my-2 my-lg-0 float-right">
                        <input class="form-control mr-sm-2 form-control-sm" type="text" name="name" placeholder="ROLE_NAME">
                        <button class="btn btn-secondary btn-sm my-2 my-sm-0" type="submit">Create</button>
                    </form>
                </div>
            </div>
        </div>
        <div class="col-lg-6">
            <div class="card border-light mb-3">
                <div class="card-header">Privileges</div>
                <div class="card-body">
                    <table class="table table-hover">
                        <thead>
                        <tr>
                            <th scope="col" class="min-vh-100">ID</th>
                            <th scope="col">Name</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for privilege in privileges %}
                            {% set remove = '/authority/privilege/remove/' ~ privilege.id %}
                            <tr>
                                <td>{{ privilege.id }}</td>
                                <td>
                                    <form id="privilegeForm{{ privilege.id }}" method="post" action="/authority/process/privilege/{{ privilege.id }}" class="form-inline">
                                        <input class="form-control form-control-sm" type="text" name="name" value="{{ privilege.name }}">
                                    </form>
                                </td>
                                <td>
                                    <button type="button" onclick="document.forms['privilegeForm{{ privilege.id }}'].submit()"
                                            class="btn btn-sm btn-info">Update</button>
                                    <button type="button" onclick="confirm('Are you sure?') ? location.href='{{ remove }}' : false"
                                            class="btn btn-sm btn-danger">Remove</button>
                                </td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
                <div class="card-footer">
                    <form method="post" action="/authority/process/privilege" class="form-inline my-2 my-lg-0 float-right">
                        <input class="form-control mr-sm-2 form-control-sm" type="text" name="name" placeholder="PRIVILEGE_NAME">
                        <button class="btn btn-secondary btn-sm my-2 my-sm-0" type="submit">Create</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
{% endblock %}